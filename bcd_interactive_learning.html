<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BCD Interactive Learning Tool</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        h1 {
            text-align: center;
            color: #667eea;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1em;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            border-bottom: 2px solid #e0e0e0;
        }

        .tab {
            padding: 15px 30px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.1em;
            color: #666;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
        }

        .tab:hover {
            color: #667eea;
        }

        .tab.active {
            color: #667eea;
            border-bottom: 3px solid #667eea;
            font-weight: bold;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .input-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .input-group {
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }

        input[type="number"] {
            flex: 1;
            min-width: 200px;
            padding: 15px;
            font-size: 1.2em;
            border: 2px solid #ddd;
            border-radius: 10px;
            transition: all 0.3s;
        }

        input[type="number"]:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        button {
            padding: 15px 30px;
            font-size: 1.1em;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        .visualization {
            margin-bottom: 30px;
        }

        .decimal-display {
            text-align: center;
            font-size: 3em;
            font-weight: bold;
            color: #667eea;
            margin: 20px 0;
            padding: 20px;
            background: linear-gradient(135deg, #e0e7ff 0%, #f3e8ff 100%);
            border-radius: 15px;
        }

        .nibble-container {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
            margin: 30px 0;
        }

        .nibble {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            min-width: 120px;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .digit-label {
            text-align: center;
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }

        .binary-display {
            display: flex;
            gap: 5px;
            justify-content: center;
            margin: 10px 0;
        }

        .bit {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2em;
            font-weight: bold;
            border-radius: 8px;
            transition: all 0.3s;
        }

        .bit.one {
            background: #667eea;
            color: white;
            animation: bitPulse 0.5s;
        }

        .bit.zero {
            background: #e0e0e0;
            color: #666;
        }

        @keyframes bitPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .bit-position {
            text-align: center;
            font-size: 0.8em;
            color: #999;
            margin-top: 5px;
        }

        .byte-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
        }

        .byte-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 15px;
            text-align: center;
        }

        .byte-display {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .byte-box {
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .hex-value {
            text-align: center;
            font-size: 1.5em;
            font-weight: bold;
            color: #764ba2;
            margin-top: 10px;
        }

        .comparison-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 30px 0;
        }

        @media (max-width: 768px) {
            .comparison-section {
                grid-template-columns: 1fr;
            }
        }

        .format-box {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
        }

        .format-title {
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
        }

        .packed-title {
            color: #667eea;
        }

        .unpacked-title {
            color: #764ba2;
        }

        .info-box {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #2196F3;
        }

        .info-box h3 {
            color: #1976D2;
            margin-bottom: 10px;
        }

        .quiz-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin-top: 20px;
        }

        .quiz-question {
            font-size: 1.3em;
            color: #333;
            margin-bottom: 20px;
        }

        .quiz-options {
            display: grid;
            gap: 15px;
            margin-bottom: 20px;
        }

        .quiz-option {
            padding: 15px;
            background: white;
            border: 2px solid #ddd;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .quiz-option:hover {
            border-color: #667eea;
            transform: translateX(5px);
        }

        .quiz-option.correct {
            background: #4caf50;
            color: white;
            border-color: #4caf50;
        }

        .quiz-option.incorrect {
            background: #f44336;
            color: white;
            border-color: #f44336;
        }

        .feedback {
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            font-weight: bold;
            text-align: center;
        }

        .feedback.correct {
            background: #c8e6c9;
            color: #2e7d32;
        }

        .feedback.incorrect {
            background: #ffcdd2;
            color: #c62828;
        }

        .score {
            text-align: center;
            font-size: 1.5em;
            margin-top: 20px;
            color: #667eea;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üî¢ BCD Interactive Learning Tool</h1>
        <p class="subtitle">Master Binary-Coded Decimal with interactive visualizations and practice</p>

        <div class="tabs">
            <button class="tab active" onclick="switchTab(0)">üìä Visualizer</button>
            <button class="tab" onclick="switchTab(1)">‚öñÔ∏è Packed vs Unpacked</button>
            <button class="tab" onclick="switchTab(2)">üéØ Practice Quiz</button>
        </div>

        <!-- Tab 1: Visualizer -->
        <div class="tab-content active" id="tab0">
            <div class="input-section">
                <div class="input-group">
                    <input type="number" id="decimalInput" placeholder="Enter a decimal number (0-9999)" min="0" max="9999" value="93">
                    <button onclick="visualizeBCD()">Visualize BCD</button>
                </div>
            </div>

            <div class="visualization" id="visualization"></div>
        </div>

        <!-- Tab 2: Packed vs Unpacked -->
        <div class="tab-content" id="tab1">
            <div class="input-section">
                <div class="input-group">
                    <input type="number" id="compareInput" placeholder="Enter a decimal number (0-99)" min="0" max="99" value="47">
                    <button onclick="compareFormats()">Compare Formats</button>
                </div>
            </div>

            <div class="info-box">
                <h3>Key Differences:</h3>
                <p><strong>Packed BCD:</strong> Two digits per byte (memory efficient)</p>
                <p><strong>Unpacked BCD:</strong> One digit per byte (processing efficient)</p>
            </div>

            <div id="comparisonResult"></div>
        </div>

        <!-- Tab 3: Practice Quiz -->
        <div class="tab-content" id="tab2">
            <div class="quiz-section" id="quizContainer">
                <h2 style="color: #667eea; text-align: center; margin-bottom: 20px;">Test Your Knowledge!</h2>
                <div class="score" id="score">Score: 0/0</div>
                <div id="quizContent"></div>
                <button onclick="generateQuiz()" style="width: 100%; margin-top: 20px;">Generate New Quiz</button>
            </div>
        </div>
    </div>

    <script>
        let quizScore = 0;
        let quizTotal = 0;

        function switchTab(tabIndex) {
            // Update tabs
            const tabs = document.querySelectorAll('.tab');
            const contents = document.querySelectorAll('.tab-content');
            
            tabs.forEach((tab, index) => {
                tab.classList.toggle('active', index === tabIndex);
            });
            
            contents.forEach((content, index) => {
                content.classList.toggle('active', index === tabIndex);
            });

            // Initialize quiz when switching to it
            if (tabIndex === 2 && quizTotal === 0) {
                generateQuiz();
            }
        }

        function decimalToBCD(digit) {
            return digit.toString(2).padStart(4, '0');
        }

        function visualizeBCD() {
            const input = document.getElementById('decimalInput');
            const value = parseInt(input.value) || 0;
            
            if (value < 0 || value > 9999) {
                alert('Please enter a number between 0 and 9999');
                return;
            }

            const digits = value.toString().padStart(1, '0').split('');
            const visualization = document.getElementById('visualization');
            
            let html = `
                <div class="decimal-display">Decimal: ${value}</div>
                <div class="nibble-container">
            `;

            digits.forEach((digit, index) => {
                const bcdValue = decimalToBCD(parseInt(digit));
                const bits = bcdValue.split('');
                
                html += `
                    <div class="nibble">
                        <div class="digit-label">${digit}</div>
                        <div class="binary-display">
                            ${bits.map((bit, i) => `
                                <div>
                                    <div class="bit ${bit === '1' ? 'one' : 'zero'}">${bit}</div>
                                    <div class="bit-position">${Math.pow(2, 3-i)}</div>
                                </div>
                            `).join('')}
                        </div>
                        <div class="hex-value">0x${parseInt(bcdValue, 2).toString(16).toUpperCase()}</div>
                    </div>
                `;
            });

            html += '</div>';

            // Show full binary representation
            const fullBinary = digits.map(d => decimalToBCD(parseInt(d))).join(' ');
            html += `
                <div class="byte-section">
                    <div class="byte-title">Complete BCD Representation</div>
                    <div style="text-align: center; font-size: 1.5em; font-family: monospace; letter-spacing: 3px;">
                        ${fullBinary}
                    </div>
                </div>
            `;

            visualization.innerHTML = html;
        }

        function compareFormats() {
            const input = document.getElementById('compareInput');
            const value = parseInt(input.value) || 0;
            
            if (value < 0 || value > 99) {
                alert('Please enter a number between 0 and 99');
                return;
            }

            const digits = value.toString().padStart(2, '0').split('');
            const result = document.getElementById('comparisonResult');
            
            // Packed BCD
            const highNibble = decimalToBCD(parseInt(digits[0]));
            const lowNibble = decimalToBCD(parseInt(digits[1]));
            const packedByte = highNibble + lowNibble;
            
            // Unpacked BCD
            const unpackedByte1 = '0000' + decimalToBCD(parseInt(digits[0]));
            const unpackedByte2 = '0000' + decimalToBCD(parseInt(digits[1]));

            let html = `
                <div class="decimal-display">Decimal: ${value}</div>
                <div class="comparison-section">
                    <div class="format-box">
                        <div class="format-title packed-title">üì¶ Packed BCD</div>
                        <div class="byte-box">
                            <div style="text-align: center; margin-bottom: 10px;">
                                <strong>1 Byte Total</strong>
                            </div>
                            <div class="binary-display" style="justify-content: center;">
                                ${packedByte.split('').map((bit, i) => `
                                    <div class="bit ${bit === '1' ? 'one' : 'zero'}" style="width: 35px; height: 35px;">
                                        ${bit}
                                    </div>
                                `).join('')}
                            </div>
                            <div style="text-align: center; margin-top: 10px;">
                                <div style="color: #667eea; font-weight: bold;">High: ${digits[0]} | Low: ${digits[1]}</div>
                                <div class="hex-value">0x${parseInt(packedByte, 2).toString(16).toUpperCase()}</div>
                            </div>
                        </div>
                        <div style="margin-top: 15px; padding: 10px; background: #e8f5e9; border-radius: 8px;">
                            <strong>‚úÖ Efficient:</strong> Only 1 byte needed<br>
                            <strong>‚ö†Ô∏è Trade-off:</strong> Requires unpacking for calculations
                        </div>
                    </div>

                    <div class="format-box">
                        <div class="format-title unpacked-title">üìÇ Unpacked BCD</div>
                        <div class="byte-box" style="margin-bottom: 10px;">
                            <div style="text-align: center; margin-bottom: 10px;">
                                <strong>Byte 1 (Digit: ${digits[0]})</strong>
                            </div>
                            <div class="binary-display" style="justify-content: center;">
                                ${unpackedByte1.split('').map((bit, i) => `
                                    <div class="bit ${bit === '1' ? 'one' : 'zero'}" style="width: 35px; height: 35px;">
                                        ${bit}
                                    </div>
                                `).join('')}
                            </div>
                            <div class="hex-value">0x${parseInt(unpackedByte1, 2).toString(16).toUpperCase()}</div>
                        </div>
                        <div class="byte-box">
                            <div style="text-align: center; margin-bottom: 10px;">
                                <strong>Byte 2 (Digit: ${digits[1]})</strong>
                            </div>
                            <div class="binary-display" style="justify-content: center;">
                                ${unpackedByte2.split('').map((bit, i) => `
                                    <div class="bit ${bit === '1' ? 'one' : 'zero'}" style="width: 35px; height: 35px;">
                                        ${bit}
                                    </div>
                                `).join('')}
                            </div>
                            <div class="hex-value">0x${parseInt(unpackedByte2, 2).toString(16).toUpperCase()}</div>
                        </div>
                        <div style="margin-top: 15px; padding: 10px; background: #fff3e0; border-radius: 8px;">
                            <strong>‚úÖ Simple:</strong> Easy digit-by-digit processing<br>
                            <strong>‚ö†Ô∏è Trade-off:</strong> Uses 2 bytes instead of 1
                        </div>
                    </div>
                </div>

                <div class="info-box" style="margin-top: 20px; background: #f3e5f5; border-left-color: #9c27b0;">
                    <h3 style="color: #7b1fa2;">üí° Real-World Example:</h3>
                    <p><strong>For decimal ${value}:</strong></p>
                    <p>üè¶ <strong>Calculator/Embedded System:</strong> Uses <span style="color: #764ba2; font-weight: bold;">unpacked BCD</span> - processes one digit at a time, simpler logic</p>
                    <p>üíæ <strong>Database/Storage:</strong> Uses <span style="color: #667eea; font-weight: bold;">packed BCD</span> - saves memory by storing two digits per byte</p>
                </div>
            `;

            result.innerHTML = html;
        }

        function generateQuiz() {
            quizScore = 0;
            quizTotal = 0;
            updateScore();

            const questions = [
                {
                    question: "What is the BCD representation of decimal 7?",
                    options: ["0111", "0110", "1000", "1001"],
                    correct: 0
                },
                {
                    question: "How many bits are used for each decimal digit in BCD?",
                    options: ["2 bits", "3 bits", "4 bits (nibble)", "8 bits"],
                    correct: 2
                },
                {
                    question: "In packed BCD, how many decimal digits can fit in one byte?",
                    options: ["1 digit", "2 digits", "3 digits", "4 digits"],
                    correct: 1
                },
                {
                    question: "What is the packed BCD representation of decimal 93?",
                    options: ["1001 0011", "1001 1001", "0011 1001", "1001 0101"],
                    correct: 0
                },
                {
                    question: "Which format is more memory efficient?",
                    options: ["Unpacked BCD", "Packed BCD", "Both are equal", "Regular binary"],
                    correct: 1
                },
                {
                    question: "In unpacked BCD for digit 5, what are the upper 4 bits?",
                    options: ["0101", "0000", "1111", "1010"],
                    correct: 1
                },
                {
                    question: "Why is BCD used in calculators?",
                    options: ["It's faster", "It's more accurate for decimal", "It uses less memory", "It's easier to program"],
                    correct: 1
                },
                {
                    question: "What is the maximum value a BCD nibble can represent?",
                    options: ["7", "8", "9", "15"],
                    correct: 2
                }
            ];

            // Select 5 random questions
            const selectedQuestions = questions.sort(() => Math.random() - 0.5).slice(0, 5);
            let html = '';

            selectedQuestions.forEach((q, index) => {
                html += `
                    <div class="quiz-question" style="margin-top: ${index > 0 ? '30px' : '0'};">
                        <strong>Question ${index + 1}:</strong> ${q.question}
                    </div>
                    <div class="quiz-options">
                        ${q.options.map((opt, i) => `
                            <div class="quiz-option" onclick="checkAnswer(${index}, ${i}, ${q.correct})">
                                ${opt}
                            </div>
                        `).join('')}
                    </div>
                    <div id="feedback${index}"></div>
                `;
            });

            document.getElementById('quizContent').innerHTML = html;
        }

        function checkAnswer(questionIndex, selectedIndex, correctIndex) {
            const options = document.querySelectorAll('.quiz-options')[questionIndex].querySelectorAll('.quiz-option');
            const feedback = document.getElementById(`feedback${questionIndex}`);
            
            // Disable all options for this question
            options.forEach((opt, i) => {
                opt.style.pointerEvents = 'none';
                if (i === correctIndex) {
                    opt.classList.add('correct');
                } else if (i === selectedIndex) {
                    opt.classList.add('incorrect');
                }
            });

            // Show feedback
            if (selectedIndex === correctIndex) {
                feedback.innerHTML = '<div class="feedback correct">‚úÖ Correct! Great job!</div>';
                quizScore++;
            } else {
                feedback.innerHTML = '<div class="feedback incorrect">‚ùå Incorrect. The correct answer is highlighted in green.</div>';
            }

            quizTotal++;
            updateScore();
        }

        function updateScore() {
            document.getElementById('score').textContent = `Score: ${quizScore}/${quizTotal}`;
        }

        // Initialize on page load
        visualizeBCD();
    </script>
</body>
</html>
